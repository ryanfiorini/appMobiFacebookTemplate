<!DOCTYPE html><!--HTML5 doctype-->
<html>
<head>
<title>jqMobi Kitchen Sink</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes" />
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">


<link rel="stylesheet" type="text/css" href="kitchensink/icons.css" /> 

<link rel="stylesheet" type="text/css" href="kitchensink/jq.ui.css" title="default"/>

<link rel="stylesheet"  type="text/css" href="kitchensink/jq.ui.carbon.css" title="carbon" disabled='true'/>
<link rel="stylesheet"  type="text/css" href="kitchensink/jq.ui.eco.css" title="eco" disabled='true' />
<link rel="stylesheet"  type="text/css" href="kitchensink/jq.ui.frosty.css" title="frosty" disabled='true'/>
<link rel="stylesheet"  type="text/css" href="kitchensink/jq.ui.slate.css" title="slate" disabled='true'/>
<link rel="stylesheet"  type="text/css" href="kitchensink/jq.ui.volcano.css" title="volcano" disabled='true' />


<style>
	.scrollBar{background:white;}
    h3 {text-align:center; font-size:35px;}
    ul.iconLinks li {font-size:12px; font-weight:normal;}
    .listbutton {
        display:block;
        border:1px solid black;
        color:black;
        background:orange;
        border-radius:5px;
        width:80%;
        text-decoration:none;
        text-align:center;
        margin:auto;
        margin-bottom:10px;
        height:30px;
        line-height:30px;
    }
    .class16 {
        background:green;
        color:red;
    }
	.jqmscrollBar {background:white !important;}	
	
</style>
<script type="text/javascript" charset="utf-8" src="appmobi_local_bootstrap.js"></script> 

<script type="text/javascript" charset="utf-8" src="jq.mobi.js"></script> 
<script type="text/javascript" charset="utf-8" src="facebook.js"></script> 

<script>
    function loadedPanel(what) {
        //We are going to set the badge as the number of li elements inside the target
    }
    function unloadedPanel(what) {
        console.log("unloaded " + what.id);
    }

    if (!((window.DocumentTouch && document instanceof DocumentTouch) || 'ontouchstart' in window)) {
        var script = document.createElement("script");
        script.src = "plugins/jq.desktopBrowsers.js";
        var tag = $("head").append(script);
        $.os.desktop = true;
    }
    var oldElem = "default";
    function setActiveStyleSheet(title) {
        var a = document.getElementsByTagName("link");
        var currElem;

        if (title == oldElem.getAttribute("title") || oldElem == "default")
            return;
        for (i = 0; i < a.length; i++) {

            if (a[i].getAttribute("title") == title) {
                currElem = a[i];
            }
            else if (!a[i].getAttribute("disabled") && a[i].getAttribute("title"))
                oldElem = a[i];
        }

        currElem.removeAttribute("disabled");
        jq.ui.showMask();
        window.setTimeout(function () {
            jq.ui.hideMask();
            oldElem.setAttribute("disabled", "true");
        }, 500);
    }
    $(document).ready(function () {
        oldElem = document.getElementsByTagName("link")[0];
    });


    function showResponse(type, response) {
        rstr = type + ": " + (response.success ? " SUCCESS" : "FAIL") + "\n";
        data = ((response.data == undefined) ? response.raw : response.data);
        if (response.cancelled == true)
            rstr += " - CANCELLED!";
        alert(rstr + data);
        alert("data: " + typeof (response.data));
        alert("raw: " + typeof (response.raw));

    }
    document.addEventListener('appMobi.facebook.request.response', function (response) { showResponse("GRAPH_API", response) }, false);
    document.addEventListener('appMobi.facebook.dialog.complete', function (response) { showResponse("DIALOG", response) }, false);
    document.addEventListener('appMobi.facebook.dialog.fail', function (response) { showResponse("DIALOG Fail", response) }, false);
    document.addEventListener('appMobi.facebook.login', function (response) { showResponse("LOGIN", response) }, false);
    document.addEventListener('appMobi.facebook.logout', function (response) { showResponse("LOGOUT", response) }, false);
    document.addEventListener('appMobi.facebook.request', function (response) { showResponse("REQUEST", response) }, false);

    //  FACEBOOK Implementation
    document.addEventListener("appMobi.facebook.login", function (e) {
        if (e.success == true)
        { alert("appMobiFacebookTemplate Log in Successful"); }
        else
        { alert("Unsuccessful Login"); }
    }, false);
    document.addEventListener("appMobi.facebook.logout", function (e) {
        if (e.success == true)
        { alert("Logged out of appMobiFacebookTemplate"); }
        else
        { alert("Unsuccessful Logout"); }
    }, false);

    function facebookPost() {
        //name,picture,caption,description,link
        facebookAPI.post({
            "name": "Ryan Win8 Template",
            "caption": "Just a test of my appMobi Win 8 Template posting a message!",
            "link": "http://apps.facebook.com/RyanWin8Template/",
            "picture": "http://dev.appmobi.com/documentation/images/possums.jpg"
        }, function (responseObject) {
            alert('in callback handler: ' + responseObject.data.Message);
        });
    }

    function facebookLogin() {
        facebookAPI.login(function (responseObject) {
            //alert('in callback handler: ' + responseObject.data.Message);
            if (responseObject.success) {
                $("#btnFBPost").show();
                $("#btnFBGetUser").show();
                $("#btnFBFriends").show();
                $("#btnFBLogout").show();
                $("#btnFBLogin").hide();
            }
        });
    }

    function facebookGetUser() {
        facebookAPI.getUser(function (responseObject) {
            debugger;
            if (responseObject!=null) {
                $("#txtProfileName").val(responseObject.username);
                $("#txtFirstName").val(responseObject.first_name);
                $("#txtLastName").val(responseObject.last_name);

                $("#fbUserInfo").show();
            }
            alert('in callback handler: facebookGetUser');
        });
    }

    function facebookGetFriends() {
        facebookAPI.friends("", function (responseObject) {
            debugger;
            if (responseObject.data.lenght>0) {
            }
            alert('in callback handler: facebookGetFriends - friend count=' + responseObject.data.length);
        });
    }

    function facebookLogout() {
        //AppMobi.facebook.logout();
        facebookAPI.logout(function (message) {
            debugger;
            alert('in callback handler: ' + message);
        });
    }
    //  FACEBOOK Implementation END

</script>

<script type="text/javascript" charset="utf-8" src="./plugins/jq.debug.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.swipe.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.carousel.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.drawer.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.shake.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.alphatable.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.template.js"></script> 

<script type="text/javascript" charset="utf-8" src="./plugins/jq.css3animate.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.scroller.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.touchLayer.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.actionsheet.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.popup.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.selectBox.js"></script> 
<script type="text/javascript" charset="utf-8" src="./plugins/jq.passwordBox.js"></script> 


<script type="text/javascript" charset="utf-8" src="./ui/src/jq.ui.js"></script> 
<script type="text/javascript" charset="utf-8" src="./ui/transitions/all.js"></script> 

<script type="text/javascript">
    /* This function runs once the page is loaded, but appMobi is not yet active */
    var webRoot = "html/";
    $.ui.autoLaunch = false;
    $.ui.openLinksNewTab = false;
    var init = function () {
        $.ui.backButtonText = "Back";
        window.setTimeout(function () { $.ui.launch(); }, 1500);
        //$.ui.removeFooterMenu(); This would remove the bottom nav menu
    };
    document.addEventListener("DOMContentLoaded", init, false);
    $.ui.ready(function () { console.log('ready'); });

    /* This code is used to run as soon as appMobi activates */
    var onDeviceReady = function () {
        window.external.notify('MESSAGE:Hello appMobi');

        console.log("wtfmobi");
        //AppMobi.device.setRotateOrientation("portrait");
        //AppMobi.device.setAutoRotate(false);
        AppMobi.webRoot = window.location.href.match('[^/]*//.*[/]{1}')[0];

        //hide splash screen
        AppMobi.device.hideSplashScreen();

        //initialize the Facebook helper library
        facebookAPI.init();
        //AppMobi.app = 'ace101.ryanwin8fbtemplate';
        AppMobi.app = '502889586389431';

        $("#main_info").toggle();
    };
    document.addEventListener("appMobi.device.ready", onDeviceReady, false);

    function showHide(obj, objToHide) {
        var el = $("#" + objToHide)[0];

        if (obj.className == "expanded") {
            obj.className = "collapsed";
        }
        else {
            obj.className = "expanded";
        }
        $(el).toggle();

    }
</script>

</head>
<body>
<div id="jQUi">
<!-- this is the splashscreen you see. -->
    <div id="splashscreen" class='ui-loader'>
        <img src="kitchensink/images/splash.png">
        <br><br>
        <span class='ui-icon ui-icon-loading spin'></span><h1 >Starting app</h1>
    </div>
    <div id="header">
        <img id='badgephone' onclick='jq.ui.toggleSideMenu()' align="right" src='kitchensink/images/badge.png' style='padding-top:10px'>
        <img id='badgetablet' align="right" src='kitchensink/images/badge.png' style='padding-top:10px'>
    </div>

<div id="content">
	<div title='Welcome' id="main" class="panel" selected="true" data-load="loadedPanel" data-unload="unloadedPanel" data-tab="navbar_home">

	<h2 class='expanded' onclick='showHide(this,"main_info");'>appMobi appMobiFacebookTemplate Template</h2>
		<p id='main_info' style="display:none;">
            <input id="btnFBLogin" type="button" onclick="facebookLogin();" class='jq-ui-forms' value="FB Login" /><br/>
            <input id="btnFBPost" style="display:none;" type="button" onclick="facebookPost();" class='jq-ui-forms' value="FB Post" /><br/>
            <input id="btnFBGetUser" style="display:none;" type="button" onclick="facebookGetUser();" class='jq-ui-forms' value="FB Get User" /><br/>
            <input id="btnFBFriends" style="display:none;" type="button" onclick="facebookGetFriends();" class='jq-ui-forms' value="FB Get Friends" /><br/>
            <input id="btnFBLogout" style="display:none;" type="button" onclick="facebookLogout();" class='jq-ui-forms' value="FB Logout" /><br/>
		</p>
        <p id="fbUserInfo" style="display:none;">
            ProfileName: <input type="text" id="txtProfileName" />
            FirstName: <input type="text" id="txtFirstName" />
            LastName: <input type="text" id="txtLastName" />
        </p>
	</div> 

</div>
<!-- ------------------------------------------ -->
<!-- navbar -->
<!-- navbar -->
<div id="navbar" style='margin: 0;float:left;'>
    <a href="#main" id='A1' class='icon home'>home <span class='jq-badge lr'>3</span></a>
</div>


<!-- ------------------------------------------ -->
<nav>
   <div class='title'>Home</div>
   <ul>
      <li class="icon home mini"><a href="#jqm">appMobiFacebookTemplate</a></li>
   </ul>
</nav>
<nav id="menu_jqmobi">
   <div class='title'>Selectors</div>
   <ul>
      <li><a href="#jqm1" >$ Selector</a></li>
   </ul>
</nav>
</div>


<iframe id="appMobi_Facebook_Communication_Frame" style="display: none; width: 100%; height: 100%; top: 0px; left: 0px; position: absolute; z-index: 2147483647; " src=""></iframe>

</body>
</html>
